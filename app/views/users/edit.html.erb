<div class="w-full">
  <%= image_tag @user.profile_picture, alt: "Profile picture", class: "mx-auto aspect-square max-w-32 rounded-full border" %>
  <h1 class="mt-6 text-center font-bold text-4xl"><%= @user.username %></h1>

  <%= form_with model: @user, class: "mt-10" do |form| %>
    <div class="mx-auto max-w-md">
    <% if @user.errors.any? %>
      <h3 class="text-xl text-center text-red-500">Couldn't register you :(</h3>
      <ul class="list-disc">
        <% @user.errors.full_messages.each do |error| %>
          <li class="text-red-500"><%= error %></li>
        <% end %>
      </ul>
    <% end %>

    <div class="my-5">
      <%= form.email_field :email_address, required: true, autofocus: true, autocomplete: "username", placeholder: "Your email address goes here :3", class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full" %>
    </div>
    <div class="my-5">
      <%= form.text_field :username, required: true, placeholder: "Whatever you wanna be called around here Nyaaa", class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full" %>
    </div>

    <div class="my-5">
      <p class="text-sm text-gray-500 mb-3">Choose your profile picture</p>
      <div class="flex gap-3 justify-center">
        <% User.pfps.keys.each do |pfp| %>
          <label class="cursor-pointer">
            <%= form.radio_button :pfp, pfp, class: "sr-only peer" %>
            <%= image_tag "pfps/#{pfp}.png", alt: pfp.humanize, class: "w-16 h-16 rounded-full object-cover border-4 border-transparent peer-checked:border-rose-400 peer-checked:ring-2 peer-checked:ring-rose-300 transition-all" %>
          </label>
        <% end %>
      </div>
    </div>

    <div class="mt-16 mx-auto md:max-w-2/3 flex justify-evenly items-center">
      <%= form.submit "Apply my awesome changes!", class: "hover:cursor-pointer text-xl underline hover:no-underline" %>
      <%= link_to "Revert everything!", @user, class: "text-xl underline hover:no-underline" %>
    </div>
  <% end %>

  <div class="mt-16 mx-auto md:max-w-2/3 flex justify-evenly items-center">
    <%= button_to "Delete account! (please don't)", @user, method: :delete, data: { turbo_confirm: "Are you sure? :(" }, class: "hover:cursor-pointer text-red-500 text-xl underline hover:no-underline" %>
  </div>
</div>
