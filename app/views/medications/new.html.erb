<div class="w-full">
  <h3 class="font-bold text-3xl text-center">New medication</h3>

  <%= form_with model: @medication, class: "mt-10 mx-auto max-w-lg" do |form| %>
    <% if @medication.errors.any? %>
      <div class="rounded-lg bg-red-50 border border-red-200 p-4 mb-6">
        <h4 class="text-red-900 font-semibold mb-2">
          <%= pluralize(@medication.errors.count, "error") %> prohibited this medication from being saved:
        </h4>
        <ul class="list-disc list-inside text-red-800 space-y-1">
          <% @medication.errors.full_messages.each do |error| %>
            <li><%= error %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="my-5">
      <%= form.text_field :name,
        placeholder: "What's it called?",
        required: true,
        class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full" %>
    </div>

    <div class="flex flex-col justify-center md:flex-row md:justify-around">
      <%= form.select :form_id, Form.all.order(:name).map { |f| [f.name, f.id] }, { include_blank: "Select a form" }, { class: "my-2 border border-rose-200 bg-rose-50 rounded-lg px-3 py-1.5 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-rose-300" } %>
      <%= form.select :labeler_id, Labeler.all.order(:name).map { |l| [l.name, l.id] }, { include_blank: "Select a labeler (optional)" }, { class: "my-2 border border-rose-200 bg-rose-50 rounded-lg px-3 py-1.5 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-rose-300" } %>
    </div>

    <div class="my-5">
      <%= form.label :active_ingredient_ids, "Active Ingredients", class: "block text-xs font-semibold uppercase tracking-widest text-rose-400 mb-2" %>
      <%= form.collection_select :active_ingredient_ids,
        ActiveIngredient.all.order(:name), :id, :name,
        { include_blank: false },
        { multiple: true, class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full h-56 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-rose-300" } %>
      <p class="text-xs text-gray-400 mt-1">Hold Ctrl / Cmd to select multiple</p>
    </div>

    <div class="my-5">
      <%= form.label :category_ids, "Categories", class: "block text-xs font-semibold uppercase tracking-widest text-rose-400 mb-2" %>
      <%= form.collection_select :category_ids,
        Category.all.order(:name), :id, :name,
        { include_blank: false },
        { multiple: true, class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full h-56 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-rose-300" } %>
      <p class="text-xs text-gray-400 mt-1">Hold Ctrl / Cmd to select multiple</p>
    </div>

    <div class="my-5">
      <%= form.rich_textarea :notes,
        placeholder: "Explanation for this medication",
        class: "shadow-sm rounded-md border bg-rose-50 border-rose-300 px-3 py-2 w-full min-h-32 text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-rose-300" %>
    </div>

    <div class="mt-8 flex justify-center">
      <%= form.submit "Add this thingy!",
        class: "rounded-md px-6 py-3 bg-rose-400 hover:bg-rose-300 cursor-pointer font-medium" %>
    </div>
  <% end %>
</div>
