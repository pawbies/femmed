<div class="w-full">
  <h3 class="text-3xl">
    <%= @medication.name %>
    <span class="text-black/50 italic">
      - <%= @medication.active_ingredients.pluck(:name).join(", ") %>
    </span>
  </h3>
  <% if @medication.labeler.present? %>
    <p class="italic">Made by <%= @medication.labeler.name %></p>
  <% end %>

  <% if @medication.categories.any? %>
    <div class="flex flex-wrap justify-baseline">
      <% @medication.categories.each do |category| %>
        <%= link_to category.name, root_path, class: "p-3 m-1 bg-rose-50 border border-rose-300 rounded-full text-nowrap border-r" %>
      <% end %>
    </div>
  <% end %>

  <div class="my-12 text-lg">
    <%= @medication.notes %>
  </div>

  <section>
    <h3 class="text-2xl">Versions</h3>
    <table class="w-full mt-3 text-sm">
      <thead>
        <tr class="border-b border-zinc-200 text-left text-xs uppercase tracking-widest text-rose-300">
          <th class="pb-3 pr-8">Name</th>
          <th class="pb-3 pr-8">Strength</th>
          <th class="pb-3 pr-8">NDC</th>
          <th class="pb-3">Add/Remove</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-zinc-100">
        <% @medication.versions.each do |version| %>
          <tr class="transition-colors hover:bg-zinc-50">
            <td class="py-3 pr-8 font-medium text-zinc-800"><%= "#{@medication.name} #{version.added_name}" %></td>
            <td class="py-3 pr-8 text-zinc-500"><%= "#{version.strength_per_dose} #{version.unit}" %></td>
            <td class="py-3 pr-8 font-mono text-xs text-zinc-400"><%= version.ndc %></td>
            <td class="my-3 font-medium text-zinc-800">
              <% unless Current.user.prescriptions.where("medication_version_id = ?", version.id).any? %>
                <%= link_to "ï¼‹ Add", new_medication_version_prescription_path(medication_version_id: version.id), method: :get,
                  class: "cursor-pointer px-3 py-1.5 bg-white border border-rose-300 text-rose-400 text-xs font-semibold rounded-lg hover:bg-rose-300 hover:text-white transition-colors" %>
              <% else %>
                <%= button_to "- Remove", Current.user.prescriptions.where("medication_version_id = ?", version.id).first, method: :delete,
                  class: "cursor-pointer px-3 py-1.5 bg-white border border-rose-300 text-rose-400 text-xs font-semibold rounded-lg hover:bg-rose-300 hover:text-white transition-colors" %>
              <% end %>
            </td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </section>
</div>
